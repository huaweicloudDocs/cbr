# 概述<a name="cbr_03_0109"></a>

业界对备份一致性的定义包括如下三类：

-   不一致备份：备份的文件、磁盘不在同一个时间点。云备份中的云服务器备份提供对弹性云服务器和裸金属服务器的基于多云硬盘一致性快照技术的数据保护。如果使用云硬盘备份进行多个磁盘单独备份，多个磁盘由于备份时间点不一致，会出现不一致备份。
-   崩溃一致性备份：崩溃一致性备份会捕获备份时磁盘上已存在的数据，文件或磁盘数据在同一时间点，但不会备份内存数据并且静默应用系统，不保证应用系统备份一致性。尽管并未保证应用一致性，但通常情况下，操作系统重启后会进行**chkdsk**等磁盘检查过程来修复各种损坏错误，数据库会进行日志回滚操作保证一致性。
-   应用一致性备份：文件或磁盘数据在同一时间点，并备份内存数据，保证应用系统一致性。

云备份同时支持崩溃一致性备份和应用一致性备份（即数据库备份）。

当云服务器部署MySQL或SAP HANA等数据库，通过云备份的数据库备份功能，可完成对云服务器数据及应用缓存的备份。崩溃一致性备份在不停机期间仅能完成对数据和部分应用缓存的备份。在发生系统故障、数据丢失的事件时，使用数据库备份，即可快速重启业务。而使用崩溃一致性备份可能会出现部分应用配置恢复不完全的情况。

云备份数据库备份的主要流程如[图1](#fig3947184273819)所示。

**图 1**  数据库备份流程图<a name="fig3947184273819"></a>  
![](figures/数据库备份流程图.png "数据库备份流程图")

>![](public_sys-resources/icon-note.gif) **说明：** 
>-   更改安全组：使用数据库备份前需要先更改云服务器的安全组。相关操作请参见[更改安全组](更改安全组.md)。
>-   安装agent：更改云服务器的安全组和在云服务器安装agent没有严格的先后顺序，在执行服务器备份前完成两项操作即可。相关操作请参见[安装Agent](安装Agent.md)。
>-   创建数据库备份：在备份服务器前创建数据库备份存储库后，绑定相应的云服务器，即可创建数据库备份。相关操作请参见[创建数据库服务器备份](创建数据库服务器备份.md)。
>-   修改或编写自定义脚本：在完成控制台上的数据库备份后，需要在云服务器中的数据库上修改或编写自定义脚本，才能完成数据库备份。相关操作请参见[通过自定义脚本实现一致性备份](https://support.huaweicloud.com/bestpractice-cbr/cbr_07_0002.html)。
>-   验证数据库备份结果：使用自定义脚本实现数据库备份后，可以通过操作验证数据库备份结果是否成功。相关操作请参见[验证数据库备份结果](https://support.huaweicloud.com/bestpractice-cbr/cbr_07_0014.html)。
>-   恢复服务器数据：可以使用备份恢复云服务器的数据，数据库应用和数据等将与备份时间点的数据保持一致。相关操作请参见[使用云服务器备份恢复数据](使用云服务器备份恢复数据.md)。

