# 使用应用备份恢复数据<a name="cbr_03_0126"></a>

可以根据应用备份将资源的数据恢复到备份时刻的状态。

## 约束限制<a name="section189951032185019"></a>

-   需要恢复的资源的状态为“在线”。
-   不建议对正在运行的应用程序的文件进行恢复，建议停止应用程序运行后再执行恢复操作。
-   如果重命名已执行过备份的数据库，建议恢复时选择新数据库名称且不覆盖现有数据库，否则可能会恢复失败。

## 文件集恢复<a name="section34342040122313"></a>

1.  登录云备份管理控制台。
    1.  登录管理控制台。
    2.  单击管理控制台左上角的![](figures/icon-region-5.png)，选择区域和项目。
    3.  选择“存储 \> 云备份 \> 应用备份 \> 文件集备份”。

2.  选择“备份副本“页签，找到存储库和文件集所对应的备份，具体操作参见[查看备份](查看备份.md)。
3.  单击备份所在行的“恢复数据”。

    选择恢复的位置：

    -   原位置：数据将恢复至原服务器原文件路径下。

        选择是否替换原有文件：

        -   替换同名的文件：恢复数据之后将导致备份时间点的数据覆盖文件或文件目录的数据，一旦执行，无法回退，请谨慎操作。
        -   跳过同名的文件：将会在原位置下自动创建与备份时间点数据一致的文件或文件目录。

    -   新位置：数据可以恢复至其他所选的服务器的文件路径下。

        选择目标主机：需要选择已在“已安装的客户端”中“在线”的主机。如果目标主机未在列表中，需要前往“应用备份 \> 客户端”完成客户端安装并关联主机。

4.  根据页面提示，单击“确定“。可以在文件集备份副本页面和本地主机确认恢复数据是否成功。

    文件集备份的“状态”恢复为“可用”时，表示恢复成功。


## 数据库恢复<a name="section17563171032418"></a>

1.  登录云备份管理控制台。
    1.  登录管理控制台。
    2.  单击管理控制台左上角的![](figures/icon-region-6.png)，选择区域和项目。
    3.  选择“存储 \> 云备份 \> 应用备份 \> 数据库备份”。

2.  选择“备份副本“页签，找到存储库和数据库所对应的备份，具体操作参见[查看备份](查看备份.md)。
3.  单击备份所在行的“恢复数据”。
    -   原位置：数据将恢复至原服务器原实例中。
    -   新位置：数据可以恢复至其他所选的主机中。

4.  选择是否重命名数据库名称。
    -   填入新名称：新恢复的数据库会以新的名字存在。
    -   不填入新名称：新恢复的数据库仍以原名字存在。

5.  选择是否覆盖同名数据库名称：
    -   是：
        -   如果未重命名数据库名称，则恢复时系统会自动查找目标主机中是否存在同名数据库，如果存在恢复数据则会覆盖该同名数据库。
        -   如果重命名数据库名称，存在与新数据库名称同名的数据库，则恢复数据则会覆盖该同名数据库。

    -   否：在恢复时如果存在同名的数据库，不会覆盖同名数据库的数据，则会跳过此恢复任务。

6.  如果选择恢复至其他主机，需要选择目标主机。如果目标主机未在列表中，需要前往“应用备份 \> 客户端”完成客户端安装并关联主机。
7.  如果选择恢复至其他主机，需要选择数据文件保存路径。即选择数据库中的数据文件保存的路径。
8.  选择日志文件保存路径。即选择数据库中的日志文件保存的路径，可以与数据文件保存路径不同。
9.  根据页面提示，单击“确定“。可以在数据库备份页面确认恢复数据是否成功。

    直到数据库备份的“状态”恢复为“可用”时，表示恢复成功。


